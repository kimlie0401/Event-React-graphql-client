{"version":3,"sources":["context/auth-context.js","pages/Auth.js","components/Loader/Loader.js","components/Bookings/BookingList/BookingList.js","components/Bookings/BookingChart/BookingChart.js","components/Bookings/BookingControls/BookingControls.js","pages/Bookings.js","components/Modal/Modal.js","components/Backdrop/Backdrop.js","components/Events/EventList/EventItem/EventItem.js","components/Events/EventList/EventList.js","pages/Events.js","pages/EventDetail.js","components/Navigation/MainNavigation.js","components/GlobalStyles.js","App.js","index.js"],"names":["React","createContext","token","userId","login","tokenExpiration","logout","AuthPage","props","state","isLogin","switchModeHandler","setState","prevState","submitHandler","event","preventDefault","email","emailEl","current","value","password","passwordEl","trim","length","requestBody","query","variables","fetch","method","body","JSON","stringify","headers","then","res","status","Error","json","resData","data","context","catch","err","console","log","alert","createRef","className","this","onSubmit","htmlFor","type","id","ref","onClick","Component","contextType","AuthContext","Container","styled","div","List","ul","Button","button","Item","li","bookingList","bookings","map","booking","key","_id","title","Date","createdAt","toLocaleDateString","onDelete","Div","BOOKINGS_BUCKETS","Cheap","min","max","Normal","Expensive","bookingChart","chartData","labels","datasets","values","bucket","filteredBookingsCount","reduce","prev","price","push","fillColor","strokeColor","highlightFill","highlightStroke","Control","bookingControls","activeOutputType","onControl","BookingsPage","loading","outputType","fetchBookings","Authorization","deleteBookingHandler","bookingId","window","confirm","filter","changeOutputTypeHandler","content","BookingList","BookingChart","Modal","Header","header","H1","h1","Content","section","Actions","modal","children","canCancel","onCancel","canConfirm","onConfirm","confirmText","Backdrop","backdrop","SLink","Link","H2","h2","P","p","eventItem","to","eventId","date","creatorId","onDetail","eventList","events","EventItem","authUserId","creator","onViewDetail","onEventDelete","Form","form","ControlM","Label","label","Input","input","Text","textarea","EventsPage","creating","selectedEvent","isActive","startCreateEventHandler","modalConfirmHandler","titleElRef","priceElRef","dateElRef","description","descriptionElRef","updatedEvents","createEvent","modalCancelHandler","showDetailHandler","find","eventDelete","i","deleteEvent","bookEventHandler","fetchEvents","rows","EventList","EventDetail","fetchData","match","params","Logo","NavLink","Nav","nav","withRouter","pathname","location","Consumer","globalStyles","createGlobalStyle","reset","App","expireTime","Cookies","set","expires","remove","storeUserInfo","store","getJSON","Provider","from","exact","path","component","GlobalStyles","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ff9088cf.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default React.createContext({\n  token: null,\n  userId: null,\n  login: (token, userId, tokenExpiration) => {},\n  logout: () => {}\n});\n","import React, { Component, Fragment } from \"react\";\n\nimport \"./Auth.css\";\nimport AuthContext from \"../context/auth-context\";\n\nclass AuthPage extends Component {\n  state = {\n    isLogin: true\n  };\n\n  static contextType = AuthContext;\n\n  constructor(props) {\n    super(props);\n    this.emailEl = React.createRef();\n    this.passwordEl = React.createRef();\n  }\n\n  switchModeHandler = () => {\n    this.setState(prevState => {\n      return { isLogin: !prevState.isLogin };\n    });\n  };\n\n  submitHandler = event => {\n    event.preventDefault();\n    if (this.state.isLogin) {\n      const email = this.emailEl.current.value;\n      const password = this.passwordEl.current.value;\n\n      if (email.trim().length === 0 || password.trim().length === 0) {\n        return;\n      }\n\n      let requestBody = {\n        query: `\n        query LoginUser($email: String!, $password:String!){\n          login(email: $email, password: $password) {\n            userId\n            token\n            tokenExpiration\n          }\n        }\n      `,\n        variables: {\n          email: email,\n          password: password\n        }\n      };\n\n      fetch(\"https://event-graphql-mongoose.herokuapp.com/\", {\n        method: \"POST\",\n        body: JSON.stringify(requestBody),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      })\n        .then(res => {\n          if (res.status !== 200 && res.status !== 201) {\n            throw new Error(\"Failed!\");\n          }\n          return res.json();\n        })\n        .then(resData => {\n          if (resData.data.login.token) {\n            this.context.login(\n              resData.data.login.token,\n              resData.data.login.userId,\n              resData.data.login.tokenExpiration\n            );\n          }\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    } else {\n      const email = this.emailEl.current.value;\n      const password = this.passwordEl.current.value;\n\n      if (email.trim().length === 0 || password.trim().length === 0) {\n        return;\n      }\n\n      const requestBody = {\n        query: `\n          mutation CreateUser($email: String!, $password: String!){\n            createUser(userInput: {email: $email, password: $password}) {\n              _id\n              email\n            }\n          }\n        `,\n        variables: {\n          email: email,\n          password: password\n        }\n      };\n\n      fetch(\"https://event-graphql-mongoose.herokuapp.com/\", {\n        method: \"POST\",\n        body: JSON.stringify(requestBody),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      })\n        .then(res => {\n          if (res.status !== 200 && res.status !== 201) {\n            throw new Error(\"Failed!\");\n          }\n          return res.json();\n        })\n        .then(resData => {\n          if (resData) {\n            console.log(resData);\n            alert(\"Created\");\n            this.setState({ isLogin: true });\n          }\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    }\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <h1 className=\"title\">{this.state.isLogin ? \"Login\" : \"Signup\"}</h1>\n        <form className=\"auth-form\" onSubmit={this.submitHandler}>\n          <div className=\"form-control\">\n            <label htmlFor=\"email\">\n              {this.state.isLogin ? \"E-Mail\" : \"Type your E-Mail\"}\n            </label>\n            <input type=\"email\" id=\"email\" ref={this.emailEl} />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"password\">\n              {this.state.isLogin ? \"Password\" : \"Create Password\"}\n            </label>\n            <input type=\"password\" id=\"password\" ref={this.passwordEl} />\n          </div>\n          <div className=\"form-actions\">\n            <button type=\"submit\">Submit</button>\n            <button type=\"button\" onClick={this.switchModeHandler}>\n              Switch to {this.state.isLogin ? \"Signup\" : \"Login\"}\n            </button>\n          </div>\n        </form>\n      </Fragment>\n    );\n  }\n}\n\nexport default AuthPage;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport \"./Loader.css\";\n\nconst Container = styled.div`\n  height: 70vh;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 5px;\n  margin-top: 20px;\n`;\n\nexport default () => (\n  <Container>\n    <div className=\"lds-roller\">\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n    {/* <span role=\"img\" aria-label=\"Loading\">\n      <svg\n        version=\"1.1\"\n        id=\"loader-1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xlink=\"http://www.w3.org/1999/xlink\"\n        x=\"0px\"\n        y=\"0px\"\n        width=\"40px\"\n        height=\"40px\"\n        viewBox=\"0 0 40 40\"\n        enableBackground=\"new 0 0 40 40\"\n        space=\"preserve\"\n      >\n        <path\n          style={{ fill: \"white\" }}\n          opacity=\"0.2\"\n          fill=\"#000\"\n          d=\"M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\n    s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\n    c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z\"\n        />\n        <path\n          style={{ fill: \"white\" }}\n          fill=\"#000\"\n          d=\"M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\n    C22.32,8.481,24.301,9.057,26.013,10.047z\"\n        >\n          <animateTransform\n            attributeType=\"xml\"\n            attributeName=\"transform\"\n            type=\"rotate\"\n            from=\"0 20 20\"\n            to=\"360 20 20\"\n            dur=\"0.5s\"\n            repeatCount=\"indefinite\"\n          />\n        </path>\n      </svg>\n    </span> */}\n  </Container>\n);\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst List = styled.ul`\n  width: 40rem;\n  max-width: 90%;\n  margin: 2rem auto;\n  list-style: none;\n  padding: 0;\n`;\n\nconst Button = styled.button`\n  background-color: rgba(46, 44, 44, 0.8);\n  font: inherit;\n  border: 1px solid rgba(46, 44, 44, 0.8);\n  border-radius: 3px;\n  padding: 0.25rem 1rem;\n  margin-right: 1rem;\n  box-shadow: 0px 1px 5px 2px rgba(0, 0, 0, 0.8);\n  color: white;\n  cursor: pointer;\n  &:hover,\n  &:active {\n    background-color: gray;\n    border-color: gray;\n  }\n`;\n\nconst Item = styled.li`\n  margin: 0.5rem 0;\n  padding: 0.5rem;\n  border: 1px solid rgba(46, 44, 44, 0.8);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst bookingList = props => (\n  <List>\n    {props.bookings.map(booking => {\n      return (\n        <Item key={booking._id}>\n          <div>\n            {booking.event.title} -{\" \"}\n            {new Date(booking.createdAt).toLocaleDateString()}\n          </div>\n          <div>\n            <Button onClick={() => props.onDelete(booking._id)}>Cancel</Button>\n          </div>\n        </Item>\n      );\n    })}\n  </List>\n);\n\nexport default bookingList;\n","import React from \"react\";\nimport { Bar as BarChart } from \"react-chartjs\";\nimport styled from \"styled-components\";\n\nconst Div = styled.div`\n  text-align: center;\n  margin-top: 3rem;\n`;\n\nconst BOOKINGS_BUCKETS = {\n  Cheap: { min: 0, max: 100 },\n  Normal: { min: 100, max: 200 },\n  Expensive: { min: 200, max: 100000000 }\n};\n\nconst bookingChart = props => {\n  const chartData = { labels: [], datasets: [] };\n  let values = [];\n  for (const bucket in BOOKINGS_BUCKETS) {\n    const filteredBookingsCount = props.bookings.reduce((prev, current) => {\n      if (\n        current.event.price > BOOKINGS_BUCKETS[bucket].min &&\n        current.event.price <= BOOKINGS_BUCKETS[bucket].max\n      ) {\n        return prev + 1;\n      } else {\n        return prev;\n      }\n    }, 0);\n    values.push(filteredBookingsCount);\n    chartData.labels.push(bucket);\n    chartData.datasets.push({\n      // label: \"My First dataset\",\n      fillColor: \"rgba(220,220,220,0.5)\",\n      strokeColor: \"rgba(220,220,220,0.8)\",\n      highlightFill: \"rgba(220,220,220,0.75)\",\n      highlightStroke: \"rgba(220,220,220,1)\",\n      data: values\n    });\n    values = [...values];\n    values[values.length - 1] = 0;\n  }\n\n  return (\n    <Div>\n      <BarChart data={chartData} />\n    </Div>\n  );\n};\n\nexport default bookingChart;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Control = styled.div`\n  text-align: center;\n  padding: 0.5rem;\n`;\n\nconst Button = styled.button`\n  font: inherit;\n  font-size: 1.5rem;\n  border: none;\n  background: transparent;\n  color: white;\n  padding: 0.25rem 3rem;\n  cursor: pointer;\n  border-bottom: 2px solid ${props => (props.current ? \"gray\" : \"transparent\")};\n  transition: border-bottom 0.5s ease-in-out;\n  &:focus {\n    outline: none;\n  }\n`;\n\nconst bookingControls = props => {\n  return (\n    <Control>\n      <Button\n        current={props.activeOutputType === \"list\"}\n        onClick={() => {\n          props.onControl(\"list\");\n        }}\n      >\n        List\n      </Button>\n      <Button\n        current={props.activeOutputType === \"chart\"}\n        onClick={() => {\n          props.onControl(\"chart\");\n        }}\n      >\n        Chart\n      </Button>\n    </Control>\n  );\n};\n\nexport default bookingControls;\n","import React, { Component, Fragment } from \"react\";\nimport AuthContext from \"../context/auth-context\";\nimport Loader from \"../components/Loader/Loader\";\nimport BookingList from \"../components/Bookings/BookingList/BookingList\";\nimport BookingChart from \"../components/Bookings/BookingChart/BookingChart\";\nimport BookingControl from \"../components/Bookings/BookingControls/BookingControls\";\n\nclass BookingsPage extends Component {\n  state = {\n    loading: true,\n    bookings: [],\n    outputType: \"list\"\n  };\n\n  static contextType = AuthContext;\n\n  componentDidMount() {\n    this.fetchBookings();\n  }\n\n  fetchBookings = () => {\n    const requestBody = {\n      query: `\n        query {\n          bookings {\n            _id\n            createdAt\n            event{\n              _id\n              title\n              date \n              price\n            }\n          }\n        }\n      `\n    };\n\n    const token = this.context.token;\n\n    fetch(\"https://event-graphql-mongoose.herokuapp.com/\", {\n      method: \"POST\",\n      body: JSON.stringify(requestBody),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error(\"Failed!\");\n        }\n        return res.json();\n      })\n      .then(resData => {\n        const bookings = resData.data.bookings;\n        this.setState({ bookings: bookings, loading: false });\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ loading: false });\n      });\n  };\n\n  deleteBookingHandler = bookingId => {\n    let confirmToDelete = window.confirm(\"Are you sure to cancel?!\");\n    if (confirmToDelete) {\n      const requestBody = {\n        query: `\n          mutation CancelBooking($id: ID!){\n            cancelBooking(bookingId: $id) {\n              _id\n              title\n              }\n            }\n        `,\n        variables: {\n          id: bookingId\n        }\n      };\n\n      const token = this.context.token;\n\n      fetch(\"https://event-graphql-mongoose.herokuapp.com/\", {\n        method: \"POST\",\n        body: JSON.stringify(requestBody),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + token\n        }\n      })\n        .then(res => {\n          if (res.status !== 200 && res.status !== 201) {\n            throw new Error(\"Failed!\");\n          }\n          return res.json();\n        })\n        .then(resData => {\n          this.setState(prevState => {\n            const updatedBookings = prevState.bookings.filter(booking => {\n              return booking._id !== bookingId;\n            });\n            return { bookings: updatedBookings, loading: false };\n          });\n        })\n        .catch(err => {\n          console.log(err);\n          this.setState({ loading: false });\n        });\n    }\n  };\n\n  changeOutputTypeHandler = outputType => {\n    if (outputType === \"list\") {\n      this.setState({ outputType: \"list\" });\n    } else {\n      this.setState({ outputType: \"chart\" });\n    }\n  };\n\n  render() {\n    let content = <Loader />;\n    if (!this.state.loading) {\n      content = (\n        <Fragment>\n          <BookingControl\n            activeOutputType={this.state.outputType}\n            onControl={this.changeOutputTypeHandler}\n          />\n          <div>\n            {this.state.outputType === \"list\" ? (\n              <BookingList\n                bookings={this.state.bookings}\n                onDelete={this.deleteBookingHandler}\n              />\n            ) : (\n              <BookingChart bookings={this.state.bookings} />\n            )}\n          </div>\n        </Fragment>\n      );\n    }\n\n    return <Fragment>{content}</Fragment>;\n  }\n}\n\nexport default BookingsPage;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Modal = styled.div`\n  width: 60%;\n  background-color: rgba(20, 20, 20, 1);\n  box-shadow: 0px 1px 5px 2px rgba(0, 0, 0, 0.8);\n  position: fixed;\n  top: 20vh;\n  left: 20%;\n  z-index: 100;\n  @media (min-width: 768px) {\n    width: 25rem;\n    left: calc((100% - 25rem) / 2);\n  }\n`;\n\nconst Header = styled.header`\n  padding: 0.5rem;\n  background-color: rgba(46, 44, 44, 1);\n`;\n\nconst H1 = styled.h1`\n  margin: 0;\n  font-size: 1.25rem;\n`;\n\nconst Content = styled.section`\n  padding: 1rem;\n`;\n\nconst Actions = styled.section`\n  display: flex;\n  justify-content: flex-end;\n`;\n\nconst Button = styled.button`\n  background-color: rgba(46, 44, 44, 0.8);\n  font: inherit;\n  border: 1px solid rgba(46, 44, 44, 0.8);\n  border-radius: 3px;\n  padding: 0.25rem 1rem;\n  margin: 0.5rem;\n  box-shadow: 0px 1px 5px 2px rgba(0, 0, 0, 0.8);\n  color: white;\n  cursor: pointer;\n  &:hover,\n  &:active {\n    background-color: gray;\n    border-color: gray;\n  }\n`;\n\nconst modal = props => (\n  <Modal>\n    <Header>\n      <H1>{props.title}</H1>\n    </Header>\n    <Content>{props.children}</Content>\n    <Actions>\n      {props.canCancel && <Button onClick={props.onCancel}>Cancel</Button>}\n      {props.canConfirm && (\n        <Button onClick={props.onConfirm}>{props.confirmText}</Button>\n      )}\n    </Actions>\n  </Modal>\n);\n\nexport default modal;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Backdrop = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  background: rgba(0, 0, 0, 0.8);\n`;\n\nconst backdrop = props => <Backdrop></Backdrop>;\n\nexport default backdrop;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nconst SLink = styled(Link)`\n  margin: 0.5rem 0;\n  padding: 0.5rem;\n  border: 1px solid rgba(46, 44, 44, 0.8);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst H1 = styled.h1`\n  margin-bottom: 0.3rem;\n  font-size: 1.2rem;\n  color: white;\n`;\nconst H2 = styled.h2`\n  margin: 0;\n  font-size: 0.7rem;\n  color: #7c7c7c;\n`;\nconst P = styled.p`\n  margin: 0 1rem;\n`;\n\nconst Button = styled.button`\n  background-color: rgba(46, 44, 44, 0.8);\n  font: inherit;\n  border: 1px solid rgba(46, 44, 44, 0.8);\n  border-radius: 3px;\n  padding: 0.25rem 1rem;\n  margin-right: 1rem;\n  box-shadow: 0px 1px 5px 2px rgba(0, 0, 0, 0.8);\n  color: white;\n  cursor: pointer;\n  &:hover,\n  &:active {\n    background-color: gray;\n    border-color: gray;\n  }\n  &:focus {\n    outline: none;\n  }\n`;\n\nconst Div = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst eventItem = props => (\n  <SLink to={`/events/${props.eventId}`} key={props.eventId}>\n    <div>\n      <H1>{props.title}</H1>\n      <H2>\n        ${props.price} - {new Date(props.date).toLocaleDateString()}\n      </H2>\n    </div>\n    <div>\n      {props.userId === props.creatorId ? (\n        <Div>\n          <P>Your the owner of this event.</P>\n          <Button\n            onClick={event => {\n              event.preventDefault();\n              props.onDelete(props.eventId);\n            }}\n          >\n            Delete\n          </Button>\n        </Div>\n      ) : (\n        <Button\n          onClick={event => {\n            event.preventDefault();\n            props.onDetail(props.eventId);\n          }}\n        >\n          View Detail\n        </Button>\n      )}\n    </div>\n  </SLink>\n);\n\nexport default eventItem;\n","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport EventItem from \"../EventList/EventItem/EventItem\";\n\nconst List = styled.ul`\n  width: 40rem;\n  max-width: 90%;\n  margin: 2rem auto;\n  list-style: none;\n  padding: 0;\n`;\nclass eventList extends Component {\n  render() {\n    const event = this.props.events.map(event => {\n      return (\n        <EventItem\n          eventId={event._id}\n          title={event.title}\n          key={event._id}\n          userId={this.props.authUserId}\n          creatorId={event.creator._id}\n          price={event.price}\n          date={event.date}\n          onDetail={this.props.onViewDetail}\n          onDelete={this.props.onEventDelete}\n        ></EventItem>\n      );\n    });\n    return <List>{event}</List>;\n  }\n}\n\nexport default eventList;\n","import React, { Component, Fragment } from \"react\";\nimport Modal from \"../components/Modal/Modal\";\nimport Backdrop from \"../components/Backdrop/Backdrop\";\nimport styled from \"styled-components\";\nimport AuthContext from \"../context/auth-context\";\nimport EventList from \"../components/Events/EventList/EventList\";\nimport Loader from \"../components/Loader/Loader\";\n\nconst Button = styled.button`\n  background-color: rgba(46, 44, 44, 0.8);\n  font: inherit;\n  border: 1px solid rgba(46, 44, 44, 0.8);\n  border-radius: 3px;\n  padding: 0.25rem 1rem;\n  margin: 0.5rem;\n  box-shadow: 0px 1px 5px 2px rgba(0, 0, 0, 0.8);\n  color: white;\n  cursor: pointer;\n  &:hover,\n  &:active {\n    background-color: gray;\n    border-color: gray;\n  }\n  &:focus {\n    outline: none;\n  }\n`;\n\nconst Control = styled.div`\n  text-align: center;\n  border: 1px solid rgba(46, 44, 44, 0.8);\n  padding: 1rem;\n  margin: 2rem auto;\n  width: 30rem;\n  max-width: 80%;\n`;\n\nconst Form = styled.form``;\n\nconst ControlM = styled.div`\n  margin-bottom: 1rem;\n`;\n\nconst Label = styled.label`\n  width: 100%;\n  display: block;\n  margin-bottom: 0.5rem;\n`;\n\nconst Input = styled.input`\n  width: 100%;\n  display: block;\n`;\n\nconst Text = styled.textarea`\n  width: 100%;\n  display: block;\n`;\n\nconst H1 = styled.h1`\n  margin-bottom: 1rem;\n  font-size: 1.25rem;\n`;\n\nconst H2 = styled.h2`\n  margin-bottom: 1rem;\n  font-size: 1rem;\n`;\n\nclass EventsPage extends Component {\n  state = {\n    creating: false,\n    loading: true,\n    events: [],\n    selectedEvent: null\n  };\n  isActive = true;\n\n  static contextType = AuthContext;\n\n  constructor(props) {\n    super(props);\n    this.titleElRef = React.createRef();\n    this.priceElRef = React.createRef();\n    this.dateElRef = React.createRef();\n    this.descriptionElRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.fetchEvents();\n  }\n\n  startCreateEventHandler = () => {\n    this.setState({ creating: true });\n  };\n\n  modalConfirmHandler = () => {\n    this.setState({ creating: false });\n    const title = this.titleElRef.current.value;\n    const price = +this.priceElRef.current.value;\n    const date = this.dateElRef.current.value;\n    const description = this.descriptionElRef.current.value;\n\n    if (\n      title.trim().length === 0 ||\n      price <= 0 ||\n      date.trim().length === 0 ||\n      description.trim().length === 0\n    ) {\n      return;\n    }\n\n    // const event = { title, price, date, description };\n\n    const requestBody = {\n      query: `\n          mutation CreateEvent($title:String!, $description: String!, $price: Float!, $date: String! ){\n            createEvent(eventInput: {title: $title, description: $description, price: $price, date: $date}) {\n              _id\n              title\n              description\n              date\n              price\n            }\n          }\n        `,\n      variables: {\n        title: title,\n        description: description,\n        price: price,\n        date: date\n      }\n    };\n\n    const token = this.context.token;\n\n    fetch(\"https://event-graphql-mongoose.herokuapp.com/\", {\n      method: \"POST\",\n      body: JSON.stringify(requestBody),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error(\"Failed!\");\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.setState(prevState => {\n          const updatedEvents = [...prevState.events];\n          updatedEvents.push({\n            _id: resData.data.createEvent._id,\n            title: resData.data.createEvent.title,\n            description: resData.data.createEvent.description,\n            date: resData.data.createEvent.date,\n            price: resData.data.createEvent.price,\n            creator: {\n              _id: this.context.userId\n            }\n          });\n          return { events: updatedEvents };\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  modalCancelHandler = () => {\n    this.setState({ creating: false, selectedEvent: null });\n  };\n\n  fetchEvents() {\n    // this.setState({ loading: true });\n    const requestBody = {\n      query: `\n          query {\n            events {\n              _id\n              title\n              description\n              date\n              price\n              creator {\n                _id\n                email\n              }\n            }\n          }\n        `\n    };\n\n    fetch(\"https://event-graphql-mongoose.herokuapp.com/\", {\n      method: \"POST\",\n      body: JSON.stringify(requestBody),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error(\"Failed!\");\n        }\n        return res.json();\n      })\n      .then(resData => {\n        const events = resData.data.events;\n        if (this.isActive) {\n          this.setState({ events: events, loading: false });\n        }\n      })\n      .catch(err => {\n        console.log(err);\n        if (this.isActive) {\n          this.setState({ loading: false });\n        }\n      });\n  }\n\n  showDetailHandler = eventId => {\n    this.setState(prevState => {\n      const selectedEvent = prevState.events.find(\n        event => event._id === eventId\n      );\n      return { selectedEvent: selectedEvent };\n    });\n  };\n\n  eventDelete = eventId => {\n    let confirmToDelete = window.confirm(\"Are you sure to delete?!\");\n    if (confirmToDelete) {\n      const requestBody = {\n        query: `\n          mutation DeleteEvent($eventId: ID!) {\n            deleteEvent(eventId: $eventId) {\n              _id\n              title\n              description\n              date\n              price\n            }\n          }\n        `,\n        variables: {\n          eventId: eventId\n        }\n      };\n\n      const token = this.context.token;\n      fetch(\"https://event-graphql-mongoose.herokuapp.com/\", {\n        method: \"POST\",\n        body: JSON.stringify(requestBody),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + token\n        }\n      })\n        .then(res => {\n          if (res.status !== 200 && res.status !== 201) {\n            throw new Error(\"Failed!\");\n          }\n          return res.json();\n        })\n        .then(resData => {\n          // this.fetchEvents();\n          this.setState(prevState => {\n            const tempEvents = [...prevState.events];\n            const updatedEvents = tempEvents.filter(\n              i => i._id !== resData.data.deleteEvent._id\n            );\n            return { events: updatedEvents };\n          });\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    }\n  };\n\n  bookEventHandler = () => {\n    if (!this.context.token) {\n      this.setState({ selectedEvent: null });\n      return;\n    }\n    const requestBody = {\n      query: `\n          mutation BookEvent($id:ID!){\n            bookEvent(eventId:$id) {\n              _id\n              createdAt\n              updatedAt\n            }\n          }\n        `,\n      variables: {\n        id: this.state.selectedEvent._id\n      }\n    };\n\n    fetch(\"https://event-graphql-mongoose.herokuapp.com/\", {\n      method: \"POST\",\n      body: JSON.stringify(requestBody),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + this.context.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error(\"Failed!\");\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.setState({ selectedEvent: null });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  componentWillUnmount() {\n    this.isActive = false;\n  }\n\n  render() {\n    return (\n      <Fragment>\n        {this.state.creating && <Backdrop />}\n        {this.state.creating && (\n          <Modal\n            title=\"Add Event\"\n            canCancel\n            canConfirm\n            onCancel={this.modalCancelHandler}\n            onConfirm={this.modalConfirmHandler}\n            confirmText=\"Confirm\"\n          >\n            <Form>\n              <ControlM>\n                <Label htmlFor=\"title\">Title</Label>\n                <Input type=\"title\" ref={this.titleElRef}></Input>\n              </ControlM>\n              <ControlM>\n                <Label htmlFor=\"price\">Price</Label>\n                <Input type=\"number\" ref={this.priceElRef}></Input>\n              </ControlM>\n              <ControlM>\n                <Label htmlFor=\"date\">Date</Label>\n                <Input type=\"datetime-local\" ref={this.dateElRef}></Input>\n              </ControlM>\n              <ControlM>\n                <Label htmlFor=\"description\">Description</Label>\n                <Text\n                  id=\"description\"\n                  rows=\"4\"\n                  ref={this.descriptionElRef}\n                ></Text>\n              </ControlM>\n            </Form>\n          </Modal>\n        )}\n        {this.state.selectedEvent && <Backdrop />}\n        {this.state.selectedEvent && (\n          <Modal\n            title={this.state.selectedEvent.title}\n            canCancel\n            canConfirm\n            onCancel={this.modalCancelHandler}\n            onConfirm={this.bookEventHandler}\n            confirmText={this.context.token ? \"Book\" : \"Confirm\"}\n          >\n            <H1>{this.state.selectedEvent.title}</H1>\n            <H2>\n              ${this.state.selectedEvent.price} -{\" \"}\n              {new Date(this.state.selectedEvent.date).toLocaleDateString()}\n            </H2>\n            <p>{this.state.selectedEvent.description}</p>\n          </Modal>\n        )}\n        {this.context.token && (\n          <Control>\n            <p>Share your own Events!</p>\n            <Button onClick={this.startCreateEventHandler}>Create Event</Button>\n          </Control>\n        )}\n        {this.state.loading ? (\n          <Loader />\n        ) : (\n          <EventList\n            events={this.state.events}\n            authUserId={this.context.userId}\n            onViewDetail={this.showDetailHandler}\n            onEventDelete={this.eventDelete}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport default EventsPage;\n","import React, { Fragment } from \"react\";\nimport Loader from \"../components/Loader/Loader\";\nclass EventDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: null,\n      description: null,\n      date: null,\n      price: null,\n      loading: false\n    };\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  fetchData = () => {\n    this.setState({ loading: true });\n    const id = this.props.match.params.id;\n    const requestBody = {\n      query: `\n    query {\n      event(eventId:\"${id}\") {\n        title\n        description\n        date\n        price\n        creator {\n          _id\n          email\n        }\n      }\n    }\n    `\n    };\n\n    fetch(\"https://event-graphql-mongoose.herokuapp.com/\", {\n      method: \"POST\",\n      body: JSON.stringify(requestBody),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error(\"Failed!\");\n        }\n        return res.json();\n      })\n      .then(resData => {\n        const event = resData.data.event;\n        this.setState({\n          title: event.title,\n          description: event.description,\n          date: event.date,\n          price: event.price,\n          loading: false\n        });\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ loading: false });\n      });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        {this.state.loading ? (\n          <Loader />\n        ) : (\n          <Fragment>\n            <h1>{this.state.title}</h1>\n            <p>{this.state.description}</p>\n            <p>{new Date(this.state.date).toLocaleDateString()}</p>\n            <p>${this.state.price}</p>\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport default EventDetail;\n","import React, { Fragment } from \"react\";\nimport { NavLink, withRouter } from \"react-router-dom\";\n\nimport AuthContext from \"../../context/auth-context\";\nimport \"./MainNavigation.css\";\nimport styled from \"styled-components\";\n\nconst Header = styled.header`\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 2.5rem;\n  background-color: rgba(20, 20, 20, 0.8);\n  z-index: 10;\n  box-shadow: 0px 1px 5px 2px rgba(0, 0, 0, 0.8);\n  padding: 0 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  color: white;\n`;\n\nconst Logo = styled.h1`\n  margin: 0;\n  font-size: 1.3rem;\n`;\n\nconst List = styled.ul`\n  display: flex;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n`;\n\nconst Item = styled.li`\n  width: 80px;\n  height: 2.5rem;\n  text-align: center;\n  border-bottom: 3px solid ${props => (props.current ? \"gray\" : \"transparent\")};\n  transition: border-bottom 0.5s ease-in-out;\n  &:hover {\n    background-color: gray;\n  }\n`;\n\nconst SLink = styled(NavLink)`\n  height: 2.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Nav = styled.nav`\n  margin-left: 2.5rem;\n`;\n\nconst Button = styled.button`\n  height: 2.5rem;\n  align-items: center;\n  justify-content: center;\n  text-decoration: none;\n  color: white;\n  border: none;\n  font: inherit;\n  background: transparent;\n  cursor: point;\n`;\n\nexport default withRouter(({ location: { pathname } }) => {\n  return (\n    <AuthContext.Consumer>\n      {context => {\n        return (\n          <Header className=\"main-navigation\">\n            <div className=\"main-navigation__logo\">\n              <Logo>DK's Event</Logo>\n            </div>\n            <Nav className=\"main-navigation__items\">\n              <List>\n                {!context.token && (\n                  <Item current={pathname === \"/auth\"}>\n                    <SLink to=\"/auth\">Authenticate</SLink>\n                  </Item>\n                )}\n                <Item current={pathname === \"/events\"}>\n                  <SLink to=\"/events\">Events</SLink>\n                </Item>\n                {context.token && (\n                  <Fragment>\n                    <Item current={pathname === \"/bookings\"}>\n                      <SLink to=\"/bookings\">Bookings</SLink>\n                    </Item>\n                    <Item>\n                      <Button onClick={context.logout}>Logout</Button>\n                    </Item>\n                  </Fragment>\n                )}\n              </List>\n            </Nav>\n          </Header>\n        );\n      }}\n    </AuthContext.Consumer>\n  );\n});\n","import { createGlobalStyle } from \"styled-components\";\nimport reset from \"styled-reset\";\n\nconst globalStyles = createGlobalStyle`\n    ${reset};\n    a{\n        text-decoration:none;\n        color:inherit;\n    }\n    *{\n        box-sizing:border-box;\n    }\n    body{\n        font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n        font-size:12px;\n        background-color:rgba(20, 20, 20, 1);\n        color:white;\n        padding-top:10px;\n    }\n`;\n\nexport default globalStyles;\n","import React, { Component, Fragment } from \"react\";\nimport { BrowserRouter, Route, Redirect, Switch } from \"react-router-dom\";\n\nimport AuthPage from \"./pages/Auth\";\nimport BookingsPage from \"./pages/Bookings\";\nimport EventsPage from \"./pages/Events\";\nimport EventDetail from \"./pages/EventDetail\";\nimport MainNavigation from \"./components/Navigation/MainNavigation\";\nimport AuthContext from \"./context/auth-context\";\nimport GlobalStyles from \"./components/GlobalStyles\";\nimport Cookies from \"js-cookie\";\n\nimport \"./App.css\";\n\nclass App extends Component {\n  state = {\n    token: null,\n    userId: null\n  };\n\n  componentDidMount() {\n    this.storeUserInfo();\n  }\n\n  storeUserInfo() {\n    let store = Cookies.getJSON(\"login\");\n    if (store) {\n      this.setState({\n        token: store.token,\n        userId: store.userId\n      });\n    }\n  }\n\n  login = (token, userId, tokenExpiration) => {\n    // 15min\n    //let inFifteenMinutes = new Date(new Date().getTime() + 15 * 60 * 1000);\n\n    let expireTime = tokenExpiration / 24; // 1 hour\n    Cookies.set(\n      \"login\",\n      { token: token, userId: userId },\n      { expires: expireTime }\n    );\n    this.setState({ token: token, userId: userId });\n  };\n\n  logout = () => {\n    Cookies.remove(\"login\");\n    this.setState({ token: null, userId: null });\n  };\n\n  render() {\n    return (\n      <>\n        <BrowserRouter>\n          <Fragment>\n            <AuthContext.Provider\n              value={{\n                token: this.state.token,\n                userId: this.state.userId,\n                login: this.login,\n                logout: this.logout\n              }}\n            >\n              <MainNavigation />\n              <main className=\"main-content\">\n                <Switch>\n                  {this.state.token && <Redirect from=\"/\" to=\"/events\" exact />}\n                  {this.state.token && (\n                    <Redirect from=\"/auth\" to=\"/events\" exact />\n                  )}\n                  {!this.state.token && (\n                    <Route path=\"/auth\" component={AuthPage} />\n                  )}\n                  <Route path=\"/events/:id\" component={EventDetail} />\n                  <Route path=\"/events\" component={EventsPage} />\n\n                  {this.state.token && (\n                    <Route path=\"/bookings\" component={BookingsPage} />\n                  )}\n                  {!this.state.token && <Redirect to=\"/auth\" exact />}\n                  <Redirect from=\"*\" to=\"/\" />\n                </Switch>\n              </main>\n            </AuthContext.Provider>\n          </Fragment>\n        </BrowserRouter>\n        <GlobalStyles />\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}